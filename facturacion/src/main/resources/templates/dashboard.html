
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard - Sistema de Facturación</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --bs-primary-rgb: 13, 110, 253;
            --bs-warning-rgb: 255, 193, 7;
            --bs-info-rgb: 23, 162, 184;
        }

        .card {
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: none;
            border-radius: 10px;
        }

        .card-header {
            font-weight: 600;
            border-radius: 10px 10px 0 0 !important;
        }

        .work-item {
            transition: all 0.3s ease;
        }

        .work-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .status-badge {
            font-size: 0.85rem;
            padding: 0.35em 0.65em;
        }

        .summary-value {
            font-size: 1.25rem;
            font-weight: 500;
        }
    </style>
</head>
<body class="bg-light">
<div class="container mt-4">
    <!-- Encabezado -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="mb-0">
            <i class="bi bi-speedometer2 text-primary"></i> Dashboard
        </h1>
        <div class="d-flex gap-2">
            <a href="/" class="btn btn-outline-primary">
                <i class="bi bi-house-door"></i> Inicio
            </a>
            <a href="/trabajos" class="btn btn-primary">
                <i class="bi bi-list-ul"></i> Ver Todos
            </a>
        </div>
    </div>

    <div class="row">
        <!-- Columna izquierda - Listado de pendientes -->
        <div class="col-lg-7">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-warning text-dark">
                    <div class="d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-exclamation-triangle"></i> Trabajos Pendientes
                        </h5>
                        <span class="badge bg-white text-dark">
                            <span th:text="${pendientes.size()}"></span> registros
                        </span>
                    </div>
                </div>
                <div class="card-body">
                    <div th:if="${pendientes.empty}" class="alert alert-info mb-0">
                        <i class="bi bi-check-circle-fill"></i> ¡Felicidades! No hay trabajos pendientes
                    </div>

                    <div th:each="trabajo : ${pendientes}" class="mb-3 p-3 work-item bg-white rounded shadow-sm">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h6 class="fw-bold mb-1" th:text="${trabajo.clienteNombre}"></h6>
                                <p class="mb-2 text-muted" th:text="${trabajo.descripcion}"></p>

                                <div class="d-flex gap-3">
                                    <div>
                                        <span class="text-muted small">Monto:</span>
                                        <span th:text="${#numbers.formatCurrency(trabajo.monto)}"
                                              class="fw-bold d-block"></span>
                                    </div>
                                    <div>
                                        <span class="text-muted small">Vence:</span>
                                        <span th:text="${#temporals.format(trabajo.fechaVencimiento, 'dd/MM/yyyy')}"
                                              th:class="${trabajo.fechaVencimiento.isBefore(T(java.time.LocalDate).now())} ?
                                                  'text-danger fw-bold' : 'text-primary fw-bold'"
                                              class="d-block"></span>
                                    </div>
                                </div>
                            </div>
                            <a th:href="@{'/trabajos/' + ${trabajo.id} + '/pagar'}"
                               class="btn btn-sm btn-success align-self-center">
                                <i class="bi bi-cash-coin"></i> Pagar
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Columna derecha - Acciones y resumen -->
        <div class="col-lg-5">
            <!-- Tarjeta de Acciones Rápidas -->
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-lightning-charge"></i> Acciones Rápidas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="/trabajos/nuevo" class="btn btn-success">
                            <i class="bi bi-plus-circle"></i> Nuevo Trabajo
                        </a>
                        <a href="/trabajos" class="btn btn-primary">
                            <i class="bi bi-list-ul"></i> Ver Todos los Trabajos
                        </a>
                        <a href="/" class="btn btn-info text-white">
                            <i class="bi bi-house-door"></i> Volver al Inicio
                        </a>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de Resumen -->
            <div class="card border-0 shadow-sm mt-4">
                <div class="card-header bg-info text-white">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-graph-up"></i> Resumen Financiero
                    </h5>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="text-muted">Trabajos pendientes:</span>
                            <span th:text="${pendientes.size()}"
                                  class="badge bg-warning text-dark status-badge"></span>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="text-muted">Total pendiente:</span>
                            <span th:text="${#numbers.formatCurrency(#aggregates.sum(pendientes.![monto]))}"
                                  class="summary-value text-danger"></span>
                        </div>
                    </div>

                    <div class="progress mt-2" style="height: 8px;">
                        <div class="progress-bar bg-warning" role="progressbar"
                             th:style="${'width: ' + (pendientes.size() > 0 ? '100' : '0') + '%'}"
                             aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>

                    <div class="mt-3">
                        <a th:href="@{'/trabajos?estado=PENDIENTE'}" class="btn btn-sm btn-outline-info w-100">
                            <i class="bi bi-filter-circle"></i> Ver solo pendientes
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1">-->
<!--    <title>Dashboard</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">-->
<!--    <style>-->
<!--        .card {-->
<!--            margin-bottom: 20px;-->
<!--            box-shadow: 0 4px 8px rgba(0,0,0,0.1);-->
<!--        }-->
<!--        .card-header {-->
<!--            font-weight: 600;-->
<!--        }-->
<!--        .border-rounded {-->
<!--            border-radius: 10px;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container mt-4">-->
<!--    <h1 class="mb-4">Trabajos Pendientes</h1>-->

<!--    <div class="row">-->
<!--        &lt;!&ndash; Columna izquierda - Listado de pendientes &ndash;&gt;-->
<!--        <div class="col-md-6">-->
<!--            <div class="card border-rounded">-->
<!--                <div class="card-header bg-warning text-dark">-->
<!--                    <h5 class="card-title mb-0"><i class="bi bi-exclamation-triangle"></i> Pendientes de Pago</h5>-->
<!--                </div>-->
<!--                <div class="card-body">-->
<!--                    <div th:if="${pendientes.empty}" class="alert alert-info">-->
<!--                        <i class="bi bi-check-circle"></i> ¡Felicidades! No hay trabajos pendientes-->
<!--                    </div>-->

<!--                    <div th:each="trabajo : ${pendientes}" class="mb-3 p-3 border rounded">-->
<!--                        <h6 th:text="${trabajo.clienteNombre}" class="fw-bold"></h6>-->
<!--                        <p th:text="${trabajo.descripcion}" class="mb-1"></p>-->
<!--                        <p class="mb-1"><strong>Monto:</strong>-->
<!--                            <span th:text="${#numbers.formatCurrency(trabajo.monto)}" class="badge bg-secondary"></span>-->
<!--                        </p>-->
<!--                        <p class="mb-2"><strong>Vence:</strong>-->
<!--                            <span th:text="${#temporals.format(trabajo.fechaVencimiento, 'dd/MM/yyyy')}"-->
<!--                                  th:class="${trabajo.fechaVencimiento.isBefore(T(java.time.LocalDate).now())} ?-->
<!--                                      'text-danger fw-bold' : 'text-primary'"></span>-->
<!--                        </p>-->
<!--                        <a th:href="@{'/trabajos/' + ${trabajo.id} + '/pagar'}"-->
<!--                           class="btn btn-sm btn-success">-->
<!--                            <i class="bi bi-cash-coin"></i> Registrar Pago-->
<!--                        </a>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Columna derecha - Acciones y resumen &ndash;&gt;-->
<!--        <div class="col-md-6">-->
<!--            <div class="card border-rounded">-->
<!--                <div class="card-header bg-primary text-white">-->
<!--                    <h5 class="card-title mb-0"><i class="bi bi-lightning-charge"></i> Acciones Rápidas</h5>-->
<!--                </div>-->
<!--                <div class="card-body">-->
<!--                    <a href="/trabajos/nuevo" class="btn btn-success w-100 mb-3">-->
<!--                        <i class="bi bi-plus-circle"></i> Nuevo Trabajo-->
<!--                    </a>-->
<!--                    <a href="/trabajos" class="btn btn-primary w-100">-->
<!--                        <i class="bi bi-list-ul"></i> Ver Todos los Trabajos-->
<!--                    </a>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="card border-rounded mt-4">-->
<!--                <div class="card-header bg-info text-white">-->
<!--                    <h5 class="card-title mb-0"><i class="bi bi-graph-up"></i> Resumen</h5>-->
<!--                </div>-->
<!--                <div class="card-body">-->
<!--                    <p class="h5">Trabajos pendientes:-->
<!--                        <span th:text="${pendientes.size()}" class="badge bg-warning text-dark"></span>-->
<!--                    </p>-->
<!--                    <p class="h5 mt-3">Total pendiente:-->
<!--                        <span th:text="${#numbers.formatCurrency(-->
<!--                #aggregates.sum(pendientes.![monto])-->
<!--            )}"-->
<!--                              class="badge bg-danger">-->
<!--        </span>-->
<!--                    </p>-->
<!--                </div>-->

<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>-->
<!--</body>-->
<!--</html>-->



